
<!doctype html>
<html lang="en">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Physically Based Rendering Notes — Energy Mapping & GPU Ray Tracing</title>
<link rel="icon" href="data:,">
<style>
:root{--bg:#0b1020;--fg:#e6e8ef;--muted:#9aa4c7;--accent:#7cd2ff;}
*{box-sizing:border-box}
body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu;line-height:1.5;
     color:var(--fg);background:linear-gradient(180deg,#0b1020,#0e1430 40%,#0b1020);}
.header{padding:32px 20px 12px;max-width:1100px;margin:0 auto}
h1,h2,h3{line-height:1.2;margin:0 0 12px}
h1{font-size:34px}
h2{font-size:22px;color:var(--accent);margin-top:24px}
p{color:var(--fg);opacity:.92}
.container{max-width:1100px;margin:0 auto;padding:0 20px 40px}
.card{background:rgba(255,255,255,0.03);border:1px solid rgba(124,210,255,.25);
      border-radius:16px;padding:18px;margin:16px 0;box-shadow:0 10px 30px rgba(0,0,0,.2)}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px}
.code{font-family:ui-monospace,Consolas,monospace;background:rgba(255,255,255,0.06);padding:10px;border-radius:12px;overflow:auto}
.small{font-size:13px;color:var(--muted)}
a{color:#9fe2ff}
hr{border:0;border-top:1px solid rgba(124,210,255,.2);margin:24px 0}
.footer{opacity:.7;font-size:13px;padding:20px;text-align:center}
svg{max-width:100%;height:auto;display:block;margin:8px auto}
.badge{display:inline-block;background:rgba(124,210,255,.15);border:1px solid rgba(124,210,255,.3);color:#cfefff;padding:2px 8px;border-radius:999px;font-size:12px}
</style>
<body>
  <header class="header">
    <span class="badge">Static site</span>
    <h1>Physically Based Rendering Notes</h1>
    <p class="small">Light energy → display mapping • GPU ray tracing pipeline • Shader–RT core handshake</p>
  </header>
  <main class="container">
    <section class="card">
      <h2>1) Light Energy Mapping</h2>
      <p>From physical radiance to display RGB: linear rendering → tone mapping → gamma → monitor nits.</p>
      
<svg viewBox="0 0 1000 420" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Light energy mapping diagram">
  <defs>
    <filter id="glow"><feGaussianBlur stdDeviation="3" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
    <linearGradient id="grad" x1="0" x2="1">
      <stop offset="0%" stop-color="#7cd2ff"/><stop offset="100%" stop-color="#b7ffea"/>
    </linearGradient>
    <style><![CDATA[
      .box{fill:rgba(255,255,255,0.06);stroke:#7cd2ff;stroke-opacity:.6;stroke-width:2}
      .title{font: 700 15px ui-sans-serif,system-ui}
      .txt{font: 13px ui-sans-serif,system-ui; fill:#e6e8ef}
      .mut{fill:#9aa4c7;font: 12px ui-sans-serif,system-ui}
      .arrow{stroke:url(#grad);stroke-width:3;marker-end:url(#m) }
    ]]></style>
    <marker id="m" markerWidth="10" markerHeight="8" refX="8" refY="4" orient="auto">
      <path d="M0,0 L10,4 L0,8 Z" fill="#9fe2ff"/>
    </marker>
  </defs>

  <!-- Sun icon -->
  <circle cx="70" cy="80" r="26" fill="#ffd76b" filter="url(#glow)"/>
  <text x="30" y="130" class="mut">Real-world light</text>
  <text x="22" y="148" class="mut">(radiance W·sr⁻¹·m⁻²)</text>

  <!-- Boxes -->
  <g transform="translate(170,40)">
    <rect class="box" x="0" y="0" width="220" height="120" rx="12"/>
    <text class="title" x="12" y="24">Renderer (Linear)</text>
    <text class="txt" x="12" y="48">• Path tracing / light transport</text>
    <text class="txt" x="12" y="70">• Linear RGB or spectral units</text>
    <text class="mut" x="12" y="100">Conserves energy (physically-based)</text>
  </g>

  <g transform="translate(430,40)">
    <rect class="box" x="0" y="0" width="220" height="120" rx="12"/>
    <text class="title" x="12" y="24">Tone Mapping</text>
    <text class="txt" x="12" y="48">Compress HDR → display range</text>
    <text class="txt" x="12" y="70">Reinhard / Filmic / ACES</text>
    <text class="mut" x="12" y="100">Keeps highlights + midtones readable</text>
  </g>

  <g transform="translate(690,40)">
    <rect class="box" x="0" y="0" width="220" height="120" rx="12"/>
    <text class="title" x="12" y="24">Gamma Encode</text>
    <text class="txt" x="12" y="48">sRGB / Rec.709 (≈2.2)</text>
    <text class="txt" x="12" y="70">Convert to non-linear RGB</text>
    <text class="mut" x="12" y="100">What displays expect</text>
  </g>

  <!-- Monitor -->
  <g transform="translate(760,210)">
    <rect x="0" y="0" width="180" height="110" rx="10" fill="rgba(255,255,255,0.06)" stroke="#7cd2ff" stroke-opacity=".6" stroke-width="2"/>
    <rect x="40" y="92" width="100" height="8" rx="4" fill="#7cd2ff" opacity=".6"/>
    <text class="title" x="12" y="-8">Display</text>
    <text class="txt" x="12" y="24">Limited luminance (nits)</text>
    <text class="mut" x="12" y="44">Perceptual approximation</text>
  </g>

  <!-- Arrows -->
  <line x1="96" y1="80" x2="170" y2="80" class="arrow"/>
  <line x1="390" y1="80" x2="430" y2="80" class="arrow"/>
  <line x1="650" y1="80" x2="690" y2="80" class="arrow"/>
  <line x1="800" y1="160" x2="850" y2="210" class="arrow"/>
</svg>

    </section>

    <section class="card">
      <h2>2) GPU Ray Tracing Pipeline</h2>
      <p>Ray generation, hardware BVH traversal, hit/miss shaders, denoising, and final frame.</p>
      
<svg viewBox="0 0 1100 520" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="GPU ray tracing pipeline">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="8" refX="8" refY="4" orient="auto">
      <path d="M0,0 L10,4 L0,8 Z" fill="#9fe2ff"/>
    </marker>
    <style><![CDATA[
      .b{fill:rgba(255,255,255,0.06);stroke:#7cd2ff;stroke-opacity:.6;stroke-width:2}
      .t{font:700 14px ui-sans-serif,system-ui;fill:#e6e8ef}
      .s{font:12px ui-sans-serif,system-ui;fill:#cdd5f0}
      .a{stroke:#9fe2ff;stroke-width:3;marker-end:url(#arrow)}
    ]]></style>
  </defs>

  <g transform="translate(20,30)">
    <rect class="b" x="0" y="0" width="220" height="110" rx="12"/>
    <text class="t" x="12" y="24">Scene Geometry</text>
    <text class="s" x="12" y="48">Meshes, triangles, materials</text>
  </g>

  <g transform="translate(280,30)">
    <rect class="b" x="0" y="0" width="220" height="110" rx="12"/>
    <text class="t" x="12" y="24">Build Acceleration</text>
    <text class="s" x="12" y="48">BVH (TLAS / BLAS)</text>
    <text class="s" x="12" y="68">Refit or rebuild when moving</text>
  </g>

  <g transform="translate(540,30)">
    <rect class="b" x="0" y="0" width="220" height="110" rx="12"/>
    <text class="t" x="12" y="24">Ray Generation</text>
    <text class="s" x="12" y="48">Per pixel / per sample threads</text>
  </g>

  <g transform="translate(800,30)">
    <rect class="b" x="0" y="0" width="260" height="110" rx="12"/>
    <text class="t" x="12" y="24">Hardware Traversal</text>
    <text class="s" x="12" y="48">RT cores / ray units</text>
    <text class="s" x="12" y="68">Ray–box / Ray–triangle tests</text>
  </g>

  <g transform="translate(140,200)">
    <rect class="b" x="0" y="0" width="220" height="110" rx="12"/>
    <text class="t" x="12" y="24">Closest-Hit Shader</text>
    <text class="s" x="12" y="48">Shading, spawn reflection/</text>
    <text class="s" x="12" y="68">refraction/shadow rays</text>
  </g>

  <g transform="translate(400,200)">
    <rect class="b" x="0" y="0" width="220" height="110" rx="12"/>
    <text class="t" x="12" y="24">Miss Shader</text>
    <text class="s" x="12" y="48">Environment/sky color</text>
  </g>

  <g transform="translate(660,200)">
    <rect class="b" x="0" y="0" width="220" height="110" rx="12"/>
    <text class="t" x="12" y="24">Any-Hit Shader</text>
    <text class="s" x="12" y="48">Alpha masking / cutouts</text>
  </g>

  <g transform="translate(920,200)">
    <rect class="b" x="0" y="0" width="160" height="110" rx="12"/>
    <text class="t" x="12" y="24">Denoiser</text>
    <text class="s" x="12" y="48">NRR / AI-based</text>
  </g>

  <g transform="translate(330,370)">
    <rect class="b" x="0" y="0" width="440" height="110" rx="12"/>
    <text class="t" x="12" y="24">Final Frame</text>
    <text class="s" x="12" y="48">Composited, tone-mapped, gamma</text>
  </g>

  <!-- arrows -->
  <line class="a" x1="240" y1="85" x2="280" y2="85"/>
  <line class="a" x1="500" y1="85" x2="540" y2="85"/>
  <line class="a" x1="760" y1="85" x2="800" y2="85"/>
  <line class="a" x1="860" y1="140" x2="820" y2="200"/>
  <line class="a" x1="880" y1="140" x2="960" y2="200"/>

  <line class="a" x1="250" y1="255" x2="400" y2="255"/>
  <line class="a" x1="360" y1="255" x2="250" y2="255"/>
  <line class="a" x1="520" y1="255" x2="880" y2="255"/>
  <line class="a" x1="500" y1="310" x2="550" y2="370"/>
  <line class="a" x1="830" y1="310" x2="660" y2="370"/>
</svg>

    </section>

    <section class="card">
      <h2>3) Shader–RT Core Handshake (Multiple Bounces)</h2>
      <p>How successive bounces are implemented via <code>TraceRay()</code>, hardware traversal, and dispatch back to shaders.</p>
      
<svg viewBox="0 0 1100 560" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Shader and RT core handshake for multiple bounces">
  <defs>
    <marker id="arr" markerWidth="10" markerHeight="8" refX="8" refY="4" orient="auto">
      <path d="M0,0 L10,4 L0,8 Z" fill="#9fe2ff"/>
    </marker>
    <style><![CDATA[
      .b{fill:rgba(255,255,255,0.06);stroke:#7cd2ff;stroke-opacity:.6;stroke-width:2}
      .t{font:700 14px ui-sans-serif,system-ui;fill:#e6e8ef}
      .s{font:12px ui-sans-serif,system-ui;fill:#cdd5f0}
      .a{stroke:#9fe2ff;stroke-width:3;marker-end:url(#arr)}
      .thin{stroke:#6fbef0;stroke-dasharray:6 6}
    ]]></style>
  </defs>

  <g transform="translate(40,30)">
    <rect class="b" x="0" y="0" width="320" height="100" rx="12"/>
    <text class="t" x="12" y="26">Ray Generation Shader</text>
    <text class="s" x="12" y="50">Launch primary ray → TraceRay()</text>
  </g>

  <g transform="translate(420,30)">
    <rect class="b" x="0" y="0" width="320" height="100" rx="12"/>
    <text class="t" x="12" y="26">RT Core Traversal</text>
    <text class="s" x="12" y="50">BVH walk, ray–triangle tests</text>
  </g>

  <g transform="translate(800,30)">
    <rect class="b" x="0" y="0" width="260" height="100" rx="12"/>
    <text class="t" x="12" y="26">Hit/Miss Dispatch</text>
    <text class="s" x="12" y="50">Closest-hit or Miss shader</text>
  </g>

  <g transform="translate(40,200)">
    <rect class="b" x="0" y="0" width="320" height="120" rx="12"/>
    <text class="t" x="12" y="26">Closest-Hit Shader</text>
    <text class="s" x="12" y="50">Compute BRDF, reflection vector</text>
    <text class="s" x="12" y="70">Optionally spawn new rays → TraceRay()</text>
  </g>

  <g transform="translate(420,200)">
    <rect class="b" x="0" y="0" width="320" height="120" rx="12"/>
    <text class="t" x="12" y="26">RT Core Traversal (Bounce 1)</text>
    <text class="s" x="12" y="50">Returns next hit/miss</text>
  </g>

  <g transform="translate(800,200)">
    <rect class="b" x="0" y="0" width="260" height="120" rx="12"/>
    <text class="t" x="12" y="26">Hit/Miss Dispatch</text>
    <text class="s" x="12" y="50">Closest-hit / Miss / Any-hit</text>
  </g>

  <g transform="translate(40,380)">
    <rect class="b" x="0" y="0" width="1020" height="130" rx="12"/>
    <text class="t" x="12" y="26">Wavefront/Queue Model</text>
    <text class="s" x="12" y="50">Large numbers of rays are bucketed by stage (gen, traverse, shade)</text>
    <text class="s" x="12" y="70">Scheduler groups similar work for cache and warp coherence</text>
  </g>

  <!-- arrows -->
  <line class="a" x1="360" y1="80" x2="420" y2="80"/>
  <line class="a" x1="740" y1="80" x2="800" y2="80"/>
  <line class="a" x1="1060" y1="80" x2="1060" y2="200"/>
  <line class="a" x1="1060" y1="200" x2="420" y2="200"/>

  <line class="a" x1="360" y1="260" x2="420" y2="260"/>
  <line class="a" x1="740" y1="260" x2="800" y2="260"/>
  <line class="thin" x1="930" y1="320" x2="930" y2="380"/>
</svg>

    </section>

    <section class="card">
      <h2>Repository Contents</h2>
      <div class="grid">
        <div>
          <h3>Files</h3>
          <ul>
            <li><code>index.html</code> — this page</li>
            <li><code>styles.css</code> — shared styles (also inlined above)</li>
            <li><code>light-energy-mapping.svg</code></li>
            <li><code>rt-pipeline.svg</code></li>
            <li><code>shader-rt-handshake.svg</code></li>
            <li><code>README.md</code></li>
          </ul>
        </div>
        <div>
          <h3>How to use</h3>
          <ol>
            <li>Download the ZIP.</li>
            <li>Unzip and open <code>index.html</code> in your browser.</li>
            <li>Drop the folder into your notes/wiki or host it on GitHub Pages.</li>
          </ol>
        </div>
      </div>
    </section>
  </main>
  <footer class="footer">© 2025 — Free to copy in your personal notes.</footer>
</body>
</html>
